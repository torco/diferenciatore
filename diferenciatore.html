<html>
<head>

<!-- Minified version -->
<link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">

<!-- Un-Minified version -->
<link rel="stylesheet" href="https://cdn.simplecss.org/simple.css">

    <style>
        style="background-color: #FFA07A;
        body{
            line-height: 1.2;
        }
        p {
           margin: 0.3rem 0;
           }
        .highlight {
            color: orange; /* Change the color as desired */
            font-weight: bold; /* Add other styles as needed */
            font-size : 1.4rem;
            }
        .nohighlight {
            color: gray; /* Change the color as desired */
            font-weight: bold; /* Add other styles as needed */
            font-size : 1.4rem;
            }
    </style>

	<title>IL DIFERENCIATORE</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>	
<script>
        function checkdif() {
            // Get the element with the specified ID
            var paragraph = document.getElementById("myParagraph");
            var P1 = document.getElementById("P1").value;
            var P2 = document.getElementById("P2").value;
            var N1 = document.getElementById("N1").value;
            var N2 = document.getElementById("N2").value;
            
            P1 = Number(P1); P2 = Number(P2) ; N1 = Number(N1) ; N2 = Number(N2);
            
            var checks = false;
            checks = (P1 == 0) ? false : true;
            checks = (P2 == 0) ? false : true;
            checks = (N1 == 0) ? false : true;
            checks = (N2 == 0) ? false : true;

            var val = (P2 / 100 - P1 / 100) / Math.sqrt(
            (((N2 * P2 / 100) + (N1 * P1 / 100)) / (N2 + N1)) *
            (1 - (((N2 * P2 / 100) + (N1 * P1 / 100)) / (N2 + N1))) *
            ((1 / N2) + (1 / N1))
            );
        
            
            var verbose = `verbose: N1 ${N1}, N2 ${N2}, P1 ${P1}, P2 ${P2}`
            
            
            var x = 'ERROR!'
            if (Math.abs(val) > 1.954) {
                var x = ' la diferencia es significativa' ;
                paragraph.classList.add("highlight");
                paragraph.classList.remove("nohighlight");
            } else {
                var x = 'la diferencia no es significativa';
                paragraph.classList.add("nohighlight");
                paragraph.classList.remove("highlight");
            }
            

            

            
            var newText = `${x} `;
            
            // Check if the element exists
            if (paragraph) {
                if (checks) {
                // Replace the text content of the element
                paragraph.textContent = newText;
                }
            } else {
                paragraph.textContent = "ERROR";
            }
        }
</script>
    
</head>
<body>
<h2>Diferencias Significativas</h2>

<p>Esta es una webapp sencilla que implementa una formula de calculo de diferencias significativas</p>

<p>P1&nbsp;<input id="P1" type="number" oninput="checkdif()" /></p>

<p>N1&nbsp;<input id="N1" type="number" oninput="checkdif()" /></p>

<p>P2&nbsp;<input id="P2" type="number" oninput="checkdif()" /></p>

<p>N2&nbsp;<input id="N2" type="number" oninput="checkdif()" /></p>


<!-- <button onclick="replaceText()" type="button">Calcular!</button>  -->

<p id="myParagraph"> - </p>

<h2>C&oacute;mo usarlo</h2>
<p>ingresa dos valores y sus respectivas bases de c&aacute;lculo, y apreta calcular. este objeto est&aacute; pensando para calcular si dos porcentajes son diferentes entre s&iacute;. P1 y P2 deben ser siempre valores entre 1 y 100, mientras que N1 y N2 pueden ser, b&aacute;sicamente, cualquier cosa (aunque deber&iacute;an ser el N no ponderado de casos de donde sacaste el porcentaje)</p>
<p>Por ejemplo, hacemos una encuesta a 300 personas, 100 del norte, 100 de la RM y 100 del sur, donde les preguntamos alguna cosa como por ejemplo cu&aacute;l es su comida favorita, y lo que nos interesa fuera el porcentaje de casos que su comida favorita es la pizza.&nbsp;</p>
<p>Nuestros resultados podr&iacute;an ser, por ejemplo, que del total de los casos el 33% de las personas les gusta la pizza, mientras que ese porcentaje&nbsp;para las personas de la RM es&nbsp;55%. Hay, naturalmente, una diferencia del 22% en el sentido de m&aacute;s gusto por la pizza entre la gente de la RM. Para saber si esa diferencia es significativa, decimos que el total es nuestro primer valor y la RM es nuestro segundo valor: as&iacute;, pues, ingresar&iacute;amos los siguientes datos</p>
<p>P1 33</p>
<p>N1 300</p>
<p>P2 55</p>
<p>N2 100</p>
<h2>Explicaci&oacute;n</h2>
<p>Este script utiliza la siguiente f&oacute;rmula</p>

<p style="text-align: center;">
  
  \( \frac{{\frac{{P2}}{{100}} - \frac{{P1}}{{100}}}}{{\sqrt{\left(\frac{{N2 \cdot P2}}{{100}} + \frac{{N1 \cdot P1}}{{100}}\right) \div (N2 + N1) \cdot \left(1 - \frac{{N2 \cdot P2}}{{100}} - \frac{{N1 \cdot P1}}{{100}}\right) \cdot \left(\frac{{1}}{{N2}} + \frac{{1}}{{N1}}\right)}}}
 \)
</p>

<p>Donde si el resultado de la f&oacute;rmula fuera, en t&eacute;rminos absolutos, mayor que 1,954, entendemos que la diferencia es "estad&iacute;sticamente significativa".</p>
<p>P1 y P2 son el valor 1 y el valor 2, N1 y N2 son la base de c&aacute;lculo (el n) de P1 y P2, respectivamente.&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>
